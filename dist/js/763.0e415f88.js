"use strict";(self["webpackChunkcrm"]=self["webpackChunkcrm"]||[]).push([[763],{63763:function(e,t,a){a.r(t),a.d(t,{default:function(){return Pe}});var i=a(66252),l=a(49963),o=a(3577);const n={class:"customer"},s={class:"table-head-container"},d={class:"filter-container"},r={class:"query-add-btns-container"},p={class:"add-btns"},c=(0,i.Uk)(" 新增 "),u={class:"query-btns"},m=(0,i.Uk)("查询"),h=(0,i.Uk)("重置"),g={class:"table-view-container"},b=["onClick"],w={class:"table-btn-box"},f=(0,i.Uk)("编辑"),y={class:"table-btn-box"},_=(0,i.Uk)("删除");function k(e,t,a,k,v,C){const D=(0,i.up)("form-create"),S=(0,i.up)("el-button"),x=(0,i.up)("table-view"),V=(0,i.up)("create-popup"),W=(0,i.up)("slide-detail"),T=(0,i.Q2)("has"),A=(0,i.Q2)("clickdebounce"),U=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",s,[(0,i._)("div",d,[(0,i.Wm)(D,{api:v.formOptions.fApi,"onUpdate:api":t[0]||(t[0]=e=>v.formOptions.fApi=e),modelValue:e.queryParam,"onUpdate:modelValue":t[1]||(t[1]=t=>e.queryParam=t),rule:v.formOptions.rule,option:v.formOptions.options,onKeyup:(0,l.D2)(e.searchQuery,["enter"])},null,8,["api","modelValue","rule","option","onKeyup"]),(0,i._)("div",r,[(0,i._)("div",p,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(S,{onClick:C.add,disabled:v.slideShow,type:"primary"},{default:(0,i.w5)((()=>[c])),_:1},8,["onClick","disabled"])),[[T,"_add"]])]),(0,i._)("div",u,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(S,{type:"primary"},{default:(0,i.w5)((()=>[m])),_:1})),[[A,e.searchQuery]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(S,null,{default:(0,i.w5)((()=>[h])),_:1})),[[A,e.searchReset]])])])])]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)(x,{ref:"refTableView",columns:v.columns,dataSource:e.dataSource,refDataTable:e.refDataTable,ipagination:e.ipagination,"onUpdate:ipagination":t[2]||(t[2]=t=>e.ipagination=t),onLoad:e.loadData},{course_name:(0,i.w5)((e=>[(0,i._)("div",{class:"table-visit--underline",onClick:t=>C.viewDetails(e.row)},(0,o.toDisplayString)(e.row.course_name||"--"),9,b)])),operate:(0,i.w5)((e=>[(0,i._)("div",w,[(0,i.Wm)(S,{type:"text",onClick:t=>C.edit(e.row)},{default:(0,i.w5)((()=>[f])),_:2},1032,["onClick"])]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",y,[(0,i.Wm)(S,{type:"text",onClick:t=>C.itemHandle("del",e.row)},{default:(0,i.w5)((()=>[_])),_:2},1032,["onClick"])])),[[T,"del"]])])),_:1},8,["columns","dataSource","refDataTable","ipagination","onLoad"])])),[[U,e.loading]]),(0,i.Wm)(V,{show:v.popupShow,"popup-type":v.popupType,action:v.createAction,onLoad:e.loadData,onClose:t[3]||(t[3]=e=>v.popupShow=!1)},null,8,["show","popup-type","action","onLoad"]),(0,i.Wm)(W,{show:v.slideShow,action:v.detailAction,"slide-type":v.slideType,onLoad:e.loadData,onClose:t[4]||(t[4]=e=>v.slideShow=!1)},null,8,["show","action","slide-type","onLoad"])])}const v={class:"table-box"},C={key:1};function D(e,t,a,l,n,s){const d=(0,i.up)("el-table-column"),r=(0,i.up)("el-table"),p=(0,i.up)("el-pagination"),c=(0,i.up)("el-row");return(0,i.wg)(),(0,i.iD)("div",{class:"table-view",ref:n.refTabelView},[(0,i._)("div",v,[((0,i.wg)(),(0,i.j4)(r,{data:a.dataSource,"max-height":a.tableMaxHeight||n.maxHeight,key:a.tableKey.value,ref:a.refDataTable,"span-method":t=>e.$emit("arraySpanMethod",t),onSelectionChange:t[0]||(t[0]=t=>e.$emit("selection-change",t,e.$refs[a.refDataTable])),class:"n-table--border","use-virtual":"",stripe:"",border:"","highlight-current-row":"",style:{width:"100%"},"header-cell-class-name":"table-header","row-key":a.rowKey,"tree-props":a.treeProps},{default:(0,i.w5)((()=>[a.whetherIndex?((0,i.wg)(),(0,i.j4)(d,{key:0,type:"index",width:"60",label:"序号",align:"left"})):(0,i.kq)("",!0),a.whetherSelection?((0,i.wg)(),(0,i.j4)(d,{key:1,selectable:s.checkSelectable,type:"selection",width:"55",align:"left","label-class-name":a.singleSelected?"single-choice":""},null,8,["selectable","label-class-name"])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.columns,((t,a)=>((0,i.wg)(),(0,i.j4)(d,{key:a,prop:t.prop,label:t.label,"min-width":t.width,align:"left",fixed:t.fixed,"column-key":t.prop,"class-name":t.class||"",sortable:t.sortable,"show-overflow-tooltip":void 0===t.showOverflowTooltip||t.showOverflowTooltip},{default:(0,i.w5)((a=>[t.slot?(0,i.WI)(e.$slots,t.slot,{key:0,row:a.row},void 0,!0):((0,i.wg)(),(0,i.iD)("span",C,(0,o.toDisplayString)(a.row[t.prop]||"--"),1))])),_:2},1032,["prop","label","min-width","fixed","column-key","class-name","sortable","show-overflow-tooltip"])))),128))])),_:3},8,["data","max-height","span-method","row-key","tree-props"]))]),a.ipagination&&Object.keys(a.ipagination).length?((0,i.wg)(),(0,i.j4)(c,{key:0,class:"p-contianer"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange,"page-sizes":a.ipagination.sizes,"page-size":a.ipagination.size,layout:"total, sizes, prev, pager, next, jumper",total:a.ipagination.total,"pager-count":5,class:"p-bar",background:""},null,8,["onSizeChange","onCurrentChange","page-sizes","page-size","total"])])),_:1})):(0,i.kq)("",!0)],512)}var S={name:"TabelView",props:{columns:{type:Array,default:()=>[]},dataSource:{type:Array,default:()=>[]},ipagination:{type:Object,default:()=>({})},whetherIndex:{default:!1},whetherSelection:{type:Boolean,default:!1},singleSelected:{type:Boolean,default:!1},queryParam:{default:()=>({})},tableFullScreen:{type:Boolean,default:!0},tableMaxHeight:{type:Number,default:0},tableKey:{default:()=>({value:Math.random()})},refDataTable:{type:String,default:"refDataTable"+Math.random()},treeProps:{type:Object,default:()=>({})},rowKey:{type:String,default:""}},components:{},data(){return{maxHeight:400,refTabelView:"refTabelView"+Math.random(),ignoreSelectedChange:!1}},mounted(){this.tableFullScreen&&(this.tableHeightCalculate(),window.addEventListener("resize",this.tableHeightCalculate))},methods:{handleSizeChange(e){this.$emit("update:ipagination",{...this.ipagination,size:e}),this.$emit("load")},handleCurrentChange(e){this.$emit("update:ipagination",{...this.ipagination,page:e}),this.$emit("load")},checkSelectable(e){let t=!0;return this.$emit("check-selectable",e,(function(e){t=e})),t},tableHeightCalculate(){this.$refs[this.refTabelView]&&this.$nextTick((()=>{this.maxHeight=this.$refs[this.refTabelView].offsetHeight-(Object.keys(this.ipagination).length?44:0)}))}}},x=a(83744);const V=(0,x.Z)(S,[["render",D],["__scopeId","data-v-27c9c730"]]);var W=V,T=a(22648),A=a(84471);function U(e="post",t,a){return(0,A.Z)({method:e,url:t,params:"get"===e?a:null,data:"post"===e?a:null})}var q={data(){return{loading:!1,disableMixinInit:!1,tableHeight:document.documentElement.clientHeight,queryParam:{},url:{list:"",field:"list"},dataSource:[{course_name:"科目三",grade:"1",class:"1401",total_member:"20",create_tm:"2022-5-20 12:50:00"}],ipagination:{page:1,page_size:20,sizes:[10,20,30],total:0},queryParamTime:[],pickerOptions:{disabledDate(e){return e.getTime()>Date.now()}},selectionList:[],singleSelected:!0,ignoreSelectedChange:!1,refDataTable:"refDataTable"+Math.random(),whetherSelection:!1,whetherIndex:!1,formOptions:{fApi:{},options:{submitBtn:!1,resetBtn:!1,form:{labelWidth:"80px"}},rule:[]}}},mounted(){this.disableMixinInit||this.loadData()},methods:{async loadData(e){if(!this.url.list)return void this.$message.error("请设置url.list属性!");this.loading=!0,1===e&&(this.ipagination.page=1);const t=this.getQueryParams(),a=await U(this.url.type||"post",this.url.list,t).catch((()=>{this.loading=!1})).finally((()=>{this.loading=!1}));a&&(200===a.code?(this.dataSource=a?.data?.list||a?.data[this.url.field]||[],this.dataSource.forEach(((e,a)=>{e.index=a+1+(t.page-1)*t.page_size})),this.ipagination.total=a.data.total):this.$message.warning(a.error))},getQueryParams(){const e=Object.assign({},this.queryParam);return e.page=this.ipagination.page,e.page_size=this.ipagination.page_size,(0,T.G_)(e)},checkSelectable(e,t){t(!0)},sortChange(e){this.queryParam.sortData=e||{},this.searchQuery()},handleSelectionChange(e,t){if(!this.ignoreSelectedChange){if(this.singleSelected&&e.length>1){const a=e[e.length-1];return this.ignoreSelectedChange=!0,t.clearSelection(),void this.$nextTick((()=>{this.ignoreSelectedChange=!1,t.toggleRowSelection(a)}))}this.selectionList=e}},searchQuery(){this.loadData(1)},searchReset(){Object.keys(this.formOptions.fApi).length?(this.formOptions.fApi.resetFields(),this.formOptions.fApi.reload()):this.queryParam={},this.$nextTick((()=>{this.searchQuery()}))}}},$=a(36105);function I(e,t,a,o,n,s){return(0,i.wg)(),(0,i.j4)(l.uT,{name:"slide-fade",onAfterEnter:s.afterEnter},{default:(0,i.w5)((()=>[a.show?((0,i.wg)(),(0,i.j4)((0,i.LL)(a.slideType),(0,i.dG)({key:0,ref:"detailView"},e.$attrs),null,16)):(0,i.kq)("",!0)])),_:1},8,["onAfterEnter"])}const O={class:"detail-box"},j={class:"detail-heaher-box"},z=(0,i._)("div",{class:"type-name"},"课程详情",-1),L={class:"detail-summary-box"},H={class:"base-title"},P={class:"base-value"},N={class:"detail-tabs-box"};function B(e,t,a,l,n,s){const d=(0,i.up)("el-tooltip"),r=(0,i.up)("detail-sale"),p=(0,i.up)("create-popup"),c=(0,i.up)("slide-detail-view");return(0,i.wg)(),(0,i.j4)(c,{loading:n.loading,onClose:s.handleClose,onAfterEnter:s.afterEnter},{default:(0,i.w5)((()=>[(0,i._)("div",O,[(0,i._)("div",j,[z,(0,i._)("div",L,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.summaryColumns,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"base-item",key:e.prop},[(0,i._)("div",H,(0,o.toDisplayString)(e.label),1),(0,i._)("div",P,[(0,i.Wm)(d,{class:"name-box-item",effect:"dark",content:n.detailObj[e.prop]||"--",placement:"top"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.toDisplayString)(n.detailObj[e.prop]||"--"),1)])),_:2},1032,["content"])])])))),128))])]),(0,i._)("div",N,[(0,i.Wm)(r,{customer:n.customer},null,8,["customer"])])]),(0,i.Wm)(p,{show:n.popupShow,"popup-type":n.popupType,action:n.createAction,onLoad:s.editCompleted,onClose:t[0]||(t[0]=e=>n.popupShow=!1)},null,8,["show","popup-type","action","onLoad"])])),_:1},8,["loading","onClose","onAfterEnter"])}function M(e,t,a,l,n,s){const d=(0,i.up)("close"),r=(0,i.up)("el-icon"),p=(0,i.up)("el-button"),c=(0,i.up)("el-card"),u=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.j4)(c,{style:(0,o.normalizeStyle)(s.style),"body-style":{padding:0,height:"100%"},class:"slide-detail-view-container"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"close-btn",type:"primary",onClick:s.close},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{name:"icon"},{default:(0,i.w5)((()=>[(0,i.Wm)(d)])),_:1})])),_:1},8,["onClick"]),(0,i.WI)(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])),[[u,a.loading]])}var Q=a(42325),E={name:"SlideDetailView",components:{},props:{loading:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:!1},fullScreen:{type:Boolean,default:!1}},data(){return{}},computed:{style(){return{"z-index":Q.Y,top:this.fullScreen?0:"60px"}}},watch:{},mounted(){this.appendToBody&&document.body.appendChild(this.$el)},beforeUnmount(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{close(){this.$emit("close")}}};const F=(0,x.Z)(E,[["render",M],["__scopeId","data-v-1f812f0a"]]);var K=F,Z=a(84036);const R=e=>((0,i.dD)("data-v-7068625f"),e=e(),(0,i.Cn)(),e),Y={class:"detail-visit"},G={class:"table-head-container"},J={class:"query-add-btns-container"},X={class:"add-btns"},ee=(0,i.Uk)(" 新增学习内容 "),te={class:"table-view-container"},ae={class:"table-btn-box"},ie=(0,i.Uk)("查看学习内容"),le={class:"table-btn-box"},oe=(0,i.Uk)("查看学习情况"),ne={class:"table-btn-box"},se=(0,i.Uk)("发起签到"),de={class:"table-btn-box"},re=(0,i.Uk)("发起讨论"),pe={class:"table-btn-box"},ce=(0,i.Uk)("查看签到结果"),ue={class:"table-btn-box"},me=(0,i.Uk)("查看讨论情况"),he=R((()=>(0,i._)("div",{class:"el-upload__text"},[(0,i.Uk)(" 拖拽文件或 "),(0,i._)("em",null,"点击图标上传文件")],-1))),ge=R((()=>(0,i._)("div",{class:"el-upload__tip"},"上传文件限制",-1))),be=(0,i.Uk)("提交"),we=(0,i.Uk)("取消"),fe={style:{"text-align":"center"}},ye=(0,i.Uk)(" 签到有效时间为 "),_e=(0,i.Uk)(" 分钟 "),ke={class:"dialog-footer"},ve=(0,i.Uk)("取消"),Ce=(0,i.Uk)("发起签到"),De={class:"dialog-footer"},Se=(0,i.Uk)("取消"),xe=(0,i.Uk)("发起讨论");function Ve(e,t,a,l,n,s){const d=(0,i.up)("el-input"),r=(0,i.up)("el-button"),p=(0,i.up)("table-view"),c=(0,i.up)("el-form-item"),u=(0,i.up)("upload-filled"),m=(0,i.up)("el-icon"),h=(0,i.up)("el-upload"),g=(0,i.up)("el-form"),b=(0,i.up)("el-dialog"),w=(0,i.up)("el-input-number"),f=(0,i.up)("el-tab-pane"),y=(0,i.up)("el-tabs"),_=(0,i.up)("el-drawer"),k=(0,i.up)("create-popup"),v=(0,i.Q2)("has"),C=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",Y,[(0,i._)("div",G,[(0,i._)("div",J,[(0,i._)("div",X,[(0,i.Wm)(d,{modelValue:n.searchContent,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchContent=e),class:"content-search",placeholder:"请输入学习内容","prefix-icon":"Search"},null,8,["modelValue"]),(0,i.Wm)(r,{class:"content-add",onClick:t[1]||(t[1]=e=>n.addContentVisible=!0),type:"primary"},{default:(0,i.w5)((()=>[ee])),_:1})])])]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",te,[(0,i.Wm)(p,{ref:"refTableView",columns:n.columns,dataSource:e.dataSource,refDataTable:e.refDataTable},{salesLeadSourceId:(0,i.w5)((e=>[(0,i.Uk)((0,o.toDisplayString)(s.gainAppoint(n.sourceOption,e.row.salesLeadSourceId,"customerSourceId").customerSource||"--"),1)])),operate:(0,i.w5)((e=>[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",ae,[(0,i.Wm)(r,{type:"text",onClick:t=>s.edit(e.row)},{default:(0,i.w5)((()=>[ie])),_:2},1032,["onClick"])])),[[v,"visit_edit"]]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",le,[(0,i.Wm)(r,{type:"text",onClick:t[2]||(t[2]=e=>n.learningDetail=!0)},{default:(0,i.w5)((()=>[oe])),_:1})])),[[v,"del"]]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",ne,[(0,i.Wm)(r,{type:"text",onClick:t[3]||(t[3]=e=>n.qiandaoVisible=!0)},{default:(0,i.w5)((()=>[se])),_:1})])),[[v,"visit_edit"]]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",de,[(0,i.Wm)(r,{type:"text",onClick:t[4]||(t[4]=e=>n.talkVisible=!0)},{default:(0,i.w5)((()=>[re])),_:1})])),[[v,"del"]]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",pe,[(0,i.Wm)(r,{type:"text",onClick:t[5]||(t[5]=e=>n.qiandaoDetail=!0)},{default:(0,i.w5)((()=>[ce])),_:1})])),[[v,"visit_edit"]]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",ue,[(0,i.Wm)(r,{type:"text"},{default:(0,i.w5)((()=>[me])),_:1})])),[[v,"del"]])])),_:1},8,["columns","dataSource","refDataTable"])])),[[C,e.loading]]),(0,i.Wm)(b,{modelValue:n.addContentVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>n.addContentVisible=e),title:"新增课程内容",width:"40%","before-close":s.handleClose},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{ref:"contentFormRef",model:n.content_form,rules:n.contentfFormRules},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{prop:"title",class:"login-email",label:"名称"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{placeholder:"",modelValue:n.content_form.title,"onUpdate:modelValue":t[6]||(t[6]=e=>n.content_form.title=e),modelModifiers:{trim:!0},class:"email-input"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(c,{prop:"content",class:"password",label:"内容"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{placeholder:"",modelValue:n.content_form.content,"onUpdate:modelValue":t[7]||(t[7]=e=>n.content_form.content=e),modelModifiers:{trim:!0},type:"text"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(h,{class:"upload-demo",drag:"",action:"https://jsonplaceholder.typicode.com/posts/",multiple:""},{tip:(0,i.w5)((()=>[ge])),default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"el-icon--upload"},{default:(0,i.w5)((()=>[(0,i.Wm)(u)])),_:1}),he])),_:1}),(0,i.Wm)(c,{class:"login-button"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{type:"primary",onClick:s.addContent},{default:(0,i.w5)((()=>[be])),_:1},8,["onClick"]),(0,i.Wm)(r,{onClick:t[8]||(t[8]=e=>n.addContentVisible=!1)},{default:(0,i.w5)((()=>[we])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","before-close"]),(0,i.Wm)(b,{modelValue:n.qiandaoVisible,"onUpdate:modelValue":t[13]||(t[13]=e=>n.qiandaoVisible=e),title:"发起签到",width:"40%"},{footer:(0,i.w5)((()=>[(0,i._)("span",ke,[(0,i.Wm)(r,{onClick:t[11]||(t[11]=e=>n.qiandaoVisible=!1)},{default:(0,i.w5)((()=>[ve])),_:1}),(0,i.Wm)(r,{type:"primary",onClick:t[12]||(t[12]=e=>n.qiandaoVisible=!1)},{default:(0,i.w5)((()=>[Ce])),_:1})])])),default:(0,i.w5)((()=>[(0,i._)("div",fe,[ye,(0,i.Wm)(w,{modelValue:n.register_tm,"onUpdate:modelValue":t[10]||(t[10]=e=>n.register_tm=e),min:1,"controls-position":"right"},null,8,["modelValue"]),_e])])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:n.talkVisible,"onUpdate:modelValue":t[17]||(t[17]=e=>n.talkVisible=e),title:"讨论话题",width:"40%"},{footer:(0,i.w5)((()=>[(0,i._)("span",De,[(0,i.Wm)(r,{onClick:t[15]||(t[15]=e=>n.talkVisible=!1)},{default:(0,i.w5)((()=>[Se])),_:1}),(0,i.Wm)(r,{type:"primary",onClick:t[16]||(t[16]=e=>n.talkVisible=!1)},{default:(0,i.w5)((()=>[xe])),_:1})])])),default:(0,i.w5)((()=>[(0,i.Wm)(d,{type:"textarea",modelValue:n.talk,"onUpdate:modelValue":t[14]||(t[14]=e=>n.talk=e)},null,8,["modelValue"])])),_:1},8,["modelValue"]),(0,i.Wm)(_,{modelValue:n.qiandaoDetail,"onUpdate:modelValue":t[19]||(t[19]=e=>n.qiandaoDetail=e),title:"签到结果",direction:"rtl",size:"20%"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{modelValue:n.qiandaoDetailActiveName,"onUpdate:modelValue":t[18]||(t[18]=e=>n.qiandaoDetailActiveName=e),class:"demo-tabs",onTabClick:s.handleClick},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{label:"已签到(12)",name:"qiandao"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.finalishList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e},(0,o.toDisplayString)(e),1)))),128))])),_:1},8,["label"]),(0,i.Wm)(f,{label:"未签到(23)",name:"notQiandao"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.notFinalishList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e},(0,o.toDisplayString)(e),1)))),128))])),_:1},8,["label"])])),_:1},8,["modelValue","onTabClick"])])),_:1},8,["modelValue"]),(0,i.Wm)(_,{modelValue:n.learningDetail,"onUpdate:modelValue":t[21]||(t[21]=e=>n.learningDetail=e),title:"背影学习结果",direction:"rtl",size:"20%"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{modelValue:n.learningDetailActiveName,"onUpdate:modelValue":t[20]||(t[20]=e=>n.learningDetailActiveName=e),class:"demo-tabs",onTabClick:s.handleClick},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{label:"已学习(12)",name:"learning"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.finalishList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e},(0,o.toDisplayString)(e),1)))),128))])),_:1},8,["label"]),(0,i.Wm)(f,{label:"未学习(23)",name:"notLearningDetail"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.notFinalishList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e},(0,o.toDisplayString)(e),1)))),128))])),_:1},8,["label"])])),_:1},8,["modelValue","onTabClick"])])),_:1},8,["modelValue"]),(0,i.Wm)(k,{ref:"refCreatePoup",show:n.popupShow,"popup-type":n.popupType,action:n.createAction,sourceOption:n.sourceOption,onUpdate:e.loadData,onClose:t[22]||(t[22]=e=>n.popupShow=!1)},null,8,["show","popup-type","action","sourceOption","onUpdate"])])}var We=a(88637),Te={name:"DetailSale",mixins:[q],components:{TableView:W,CreatePopup:$.Z},props:{customer:{type:Object,default:()=>({})}},setup(){const e=(0,We.oR)();return{visitMode:(0,i.Fl)((()=>e.getters.visitMode))}},data(){return{columns:[{label:"学习内容",prop:"content",width:140},{label:"已学人数",prop:"learned",width:50},{label:"未学人数",slot:"unlearned",width:50},{label:"操作",slot:"operate",width:250}],url:{list:"/crm/admin/api/sales_lead/query/list_in_customer",type:"get"},disableMixinInit:!0,popupShow:!1,addContentVisible:!1,qiandaoVisible:!1,talkVisible:!1,qiandaoDetail:!1,learningDetail:!1,popupType:"CreateOpportunity",createAction:{type:"add",id:"",data:{}},sourceOption:[],searchContent:"",content_form:{title:"",content:""},register_tm:1,talk:"",contentfFormRules:{title:[{required:!0,message:"请输入名称",trigger:"change"}],content:[{required:!0,message:"请输入内容",trigger:"change"}]},qiandaoDetailActiveName:"qiandao",finalishList:["zhangsan","lisi"],notFinalishList:["zhangsan","lisi"],learningDetailActiveName:"learning"}},watch:{"customer.customerId":{handler(e){this.queryParam.customerId=e,e&&this.loadData()},immediate:!0,deep:!0}},methods:{handleClose(){},handleClick(){},addContent(){this.$refs.contentFormRef.validate((async e=>{e&&(this.addContentVisible=!1)}))},edit(e){this.createAction={type:"edit",id:e.salesLeadId,data:e},this.popupShow=!0},gainAppoint(){return(0,T.uT)(...arguments)}}};const Ae=(0,x.Z)(Te,[["render",Ve],["__scopeId","data-v-7068625f"]]);var Ue=Ae;$.Z;var qe={name:"CustomerDetail",components:{SlideDetailView:K,DetailSale:Ue,CreatePopup:$.Z},props:{action:{type:Object,default:()=>({id:1,list:[],index:1,tabName:"detail",data:{}})}},setup(){return{}},data(){return{loading:!1,detailObj:{},customer:{},index:1,summaryColumns:[{label:"课程名称",prop:"course_name"},{label:"年级",prop:"grade"},{label:"班级",prop:"class"},{label:"班级人数",prop:"total_member"},{label:"创建时间",prop:"create_tm"}],tabActiveName:"detail",popupShow:!1,popupType:"CreateCustomer",createAction:{type:"edit",id:""}}},created(){this.tabActiveName=this.action.tabName||this.tabActiveName,this.index=this.action.index,this.detailObj=this.action},async mounted(){},methods:{afterEnter(){},handleClose(){this.$route.params.customerId&&delete this.$route.params.customerId},customerEdit(){this.createAction={type:"edit",id:this.detailObj.customerId},this.popupShow=!0},editCompleted(){this.queryCustomerDetail(),this.$emit("load")},changePage(e){switch(e){case"back":if(this.$route.params.customerId&&this.index<=0||!this.$route.params.customerId&&this.index<=1)return this.$message.error("没有更多了！");this.index--;break;case"next":if(this.index>=this.action.list.length)return this.$message.error("没有更多了！");this.index++;break;default:break}this.queryCustomerDetail()},tabClick(){},async queryCustomerDetail(){this.loading=!0;const e={customerId:this.action.list[this.index-1]||this.action.id},t=await(0,Z.queryCustomerDetail)(e).finally((()=>{this.loading=!1}));t&&0===t.code?(this.detailObj=t.data.obj,this.customer={customerId:this.detailObj.customerId,customerName:this.detailObj.customerName}):this.$message.warning(t.msg)}},watch:{"action.index":{handler(e){e!==this.index&&(this.index=e,this.queryCustomerDetail())},deep:!0}}};const $e=(0,x.Z)(qe,[["render",B]]);var Ie=$e,Oe={name:"SlideDetail",components:{CustomerDetail:Ie},inheritAttrs:!1,props:{slideType:{type:String,default:""},show:{type:Boolean,default:!1}},data(){return{}},methods:{afterEnter(){this.$refs.detailView.afterEnter()}}};const je=(0,x.Z)(Oe,[["render",I],["__scopeId","data-v-b72dcc3e"]]);var ze=je,Le={name:"CustomerIndex",mixins:[q],components:{TableView:W,CreatePopup:$.Z,SlideDetail:ze},setup(){const e=(0,We.oR)();return{userInfo:(0,i.Fl)((()=>e.getters.userInfo))}},data(){return{columns:[{label:"课程名",prop:"course_name",slot:"course_name",width:140},{label:"年级",prop:"grade",width:120},{label:"班级",prop:"class",width:100},{label:"班级人数",prop:"total_member",width:100},{label:"创建时间",prop:"create_tm",width:200},{label:"操作",slot:"operate",width:180}],url:{list:"/v1/course"},formOptions:{fApi:{},options:{submitBtn:!1,resetBtn:!1,form:{labelWidth:"100px"},global:{"*":{props:{clearable:!0,maxlength:50}}}},rule:[{type:"select",field:"grade",title:"年级",options:[{value:1,label:"一年级"},{value:2,label:"二年级"},{value:3,label:"三年级"},{value:4,label:"四年级"},{value:5,label:"五年级"},{value:6,label:"六年级"}]},{type:"select",field:"class",title:"班级",options:[{value:1}]},{type:"DatePicker",field:"section_day",title:"创建时间",props:{type:"datetimerange",placeholder:"请选择时间"}},{type:"input",field:"course",title:"课程名",props:{"suffix-icon":"Search"}}]},popupShow:!1,popupType:"CreateCustomer",slideShow:!1,slideType:"CustomerDetail",createAction:{type:"add",id:"",data:{}},detailAction:{id:1,list:[],data:{}}}},async mounted(){},methods:{add(){this.createAction=this.$options.data().createAction,this.popupShow=!0},edit(e){this.createAction={type:"edit",id:e.customerId,data:e},this.popupShow=!0},viewDetails(e){this.detailAction={id:e.customerId,list:this.dataSource.map((e=>e.customerId)),index:e.index,tabName:e.tabName},this.detailAction=Object.assign(this.detailAction,e),this.slideShow=!0},itemHandle(e,t,a){"del"===e&&this.$confirm("您确定要删除这一条数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await(0,Z.A)({customerId:t.customerId}).catch((()=>{}));e&&200===e.code?(this.$message.success(e.msg),this.loadData()):this.$message.warning(e.msg)})).catch((()=>{}))}}};const He=(0,x.Z)(Le,[["render",k],["__scopeId","data-v-28f5e28d"]]);var Pe=He}}]);
//# sourceMappingURL=763.0e415f88.js.map