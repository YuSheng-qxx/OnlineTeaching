{"version":3,"file":"js/810.0caeaa5b.js","mappings":"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","sources":["webpack://crm/./src/views/login/index.vue","webpack://crm/./src/views/login/index.vue?b794"],"sourcesContent":["<template>\n  <div class=\"login_container\">\n    <div class=\"login_box\">\n      <el-row class=\"logo-row\">\n        <el-col class=\"logo-col\">\n          <!-- <img class=\"logo-img\" src=\"@/assets/images/login_logo.svg\" alt=\"\" /> -->\n          CRM\n        </el-col>\n      </el-row>\n      <!-- 表单 -->\n      <el-form ref=\"loginFormRef\" class=\"login_form\" :model=\"form\" :rules=\"formRules\">\n        <el-form-item prop=\"user_id\" class=\"login-email\">\n          <el-input placeholder=\"账户名\" v-model.trim=\"form.user_id\" class=\"email-input\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\" class=\"password\">\n          <el-input placeholder=\"密码\" v-model.trim=\"form.password\" type=\"password\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"vcode\" class=\"vcode\">\n          <el-input placeholder=\"验证码\" v-model.trim=\"form.vcode\"></el-input>\n          <img :src=\"vcodeImage\" alt=\"\" class=\"v-code-img\" @click=\"verifycode\" />\n        </el-form-item>\n        <el-form-item class=\"login-button\">\n          <el-button type=\"primary\" @click=\"login\" :loading=\"loginLoading\">登录</el-button>\n        </el-form-item>\n        <div class=\"add-box\">\n          <el-button class=\"add-btn\" type=\"text\" @click=\"add\">注册</el-button>\n        </div>\n      </el-form>\n    </div>\n    <create-popup\n      :show=\"popupShow\"\n      :popup-type=\"popupType\"\n      :action=\"createAction\"\n      @close=\"popupShow = false\"\n    />\n  </div>\n</template>\n<script>\nimport { verifycode, login } from \"@/api/login\";\nimport CreatePopup from \"@/components/CreatePopup\";\n\nexport default {\n  name: \"LoginLayout\",\n  components: { CreatePopup },\n\n  data() {\n    return {\n      form: {\n        user_id: \"\",\n        password: \"\",\n        captid: \"\",\n        vcode: \"\"\n      },\n      loginLoading: false,\n      vcodeImage: \"\",\n      //表单验证规则\n      formRules: {\n        user_id: [\n          { required: true, message: \"请输入用户名\", trigger: \"change\" },\n          {\n            min: 3,\n            max: 20,\n            message: \"长度在 3 到 20 个字符\",\n            trigger: \"change\"\n          }\n        ],\n        password: [{ required: true, message: \"请输入密码\", trigger: \"change\" }],\n        vcode: [{ required: true, message: \"请输入验证码\", trigger: \"change\" }]\n      },\n      initialRoute: \"/crm/customer\",\n      popupShow: false,\n      popupType: \"CreateUser\",\n      createAction: {\n        type: \"add\",\n        id: \"\",\n        data: {}\n      }\n    };\n  },\n  mounted() {\n    this.verifycode();\n  },\n  methods: {\n    //验证码\n    verifycode() {\n      verifycode()\n        .then(res => {\n          if (res && res.code === 200) {\n            this.form.captid = res.data.captid;\n            this.vcodeImage = res.data.image;\n          } else {\n            this.$message.error(res.error);\n          }\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    },\n    //登录\n    login() {\n      this.$refs.loginFormRef.validate(async valid => {\n        if (!valid) return;\n        this.loginLoading = true;\n        login(this.form)\n          .then(res => {\n            if (res && res.code === 200) {\n              let token = res.data.authorization;\n              localStorage.setItem(\"crmToken\", token);\n              localStorage.setItem(\n                \"crmPermission\",\n                JSON.stringify({\n                  loginUser: res.data\n                })\n              );\n              this.$store.commit(\"set_userInfo\", res.data);\n              this.$message.success(\"登录成功\");\n              this.$router.push(\"/crm/customer\");\n            } else {\n              this.$message.warning(res.message);\n            }\n          })\n          .catch(() => {})\n          .finally(() => {\n            this.loginLoading = false;\n            this.verifycode();\n          });\n      });\n    },\n    // 注册\n    add() {\n      this.createAction = this.$options.data().createAction;\n      this.popupShow = true;\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.login_container {\n  height: 100%;\n  background: url(../../assets/images/login_bg.png) no-repeat;\n  background-size: cover;\n  .login_box {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 640px;\n    height: 466px;\n    box-sizing: border-box;\n    padding: 52px 60px 60px !important;\n    background-color: #fff;\n\n    .logo-row {\n      .logo-col {\n        margin-top: 30px;\n        font-size: 28px;\n        font-weight: 400;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n\n        .logo-img {\n          width: 144px;\n          height: 107px;\n          margin-bottom: 24px;\n        }\n      }\n    }\n    .vcode {\n      .el-form-item__content {\n        display: flex;\n        .el-input {\n          flex: 1;\n          margin-right: 12px;\n        }\n      }\n      .v-code-img {\n        height: 40px;\n      }\n    }\n\n    .login-button {\n      margin-bottom: 0;\n      .el-button {\n        width: 100%;\n        height: 38px;\n      }\n    }\n    .add-box {\n      text-align: right;\n    }\n    .add-btn {\n      font-size: 12px;\n    }\n\n    :deep(.el-input__inner) {\n      height: 40px;\n    }\n\n    :deep(.el-form-item__error) {\n      padding-top: 4px;\n    }\n\n    :deep(.login_form) {\n      text-align: center;\n      position: absolute;\n      bottom: 82px;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 328px;\n      .login-email {\n        margin-bottom: 20px;\n      }\n      .email-input {\n        .el-input__suffix-inner {\n          color: rgba(0, 0, 0, 0.3);\n        }\n\n        .el-input-group__append {\n          background-color: #ffffff;\n          border-color: rgba(0, 0, 0, 0.3);\n        }\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./index.vue?vue&type=template&id=353f72c6&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=353f72c6&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/qiubenyang/Documents/工作/caiwen/graduation/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-353f72c6\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","_createVNode","_component_el_row","_component_el_col","_component_el_form","ref","model","$data","rules","_component_el_form_item","prop","_component_el_input","placeholder","user_id","$event","trim","password","type","vcode","src","alt","onClick","$options","_component_el_button","loading","_component_create_popup","show","action","onClose","name","components","CreatePopup","data","form","captid","loginLoading","vcodeImage","formRules","required","message","trigger","min","max","initialRoute","popupShow","popupType","createAction","id","mounted","this","verifycode","methods","then","res","code","image","$message","error","catch","err","console","log","login","$refs","loginFormRef","validate","async","valid","token","authorization","localStorage","setItem","JSON","stringify","loginUser","$store","commit","success","$router","push","warning","finally","add","__exports__","render"],"sourceRoot":""}